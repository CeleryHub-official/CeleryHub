-- Start of HUB

-- This script will highlight all players in the game, except the local player, with a specific color using SurfaceGuis on all sides

-- Define the color you want to use for highlighting
local highlightColor = Color3.new(1, 0, 0) -- Red color

-- Get the local player
local localPlayer = game.Players.LocalPlayer

-- Function to apply highlight to a player
local function highlightPlayer(player)
    -- Check if the player exists and is not the local player
    if player and player ~= localPlayer and player.Character then
        -- Loop through all parts of the player's character
        for _, part in ipairs(player.Character:GetChildren()) do
            -- Check if the part is a BasePart (such as torso, head, etc.)
            if part:IsA("BasePart") then
                -- Loop through all visible faces of the part
                for _, face in ipairs(Enum.NormalId:GetEnumItems()) do
                    -- Create a SurfaceGui for each face
                    local surfaceGui = Instance.new("SurfaceGui")
                    surfaceGui.Parent = part
                    surfaceGui.Face = face
                    surfaceGui.AlwaysOnTop = true
                    
                    -- Create a Frame inside the SurfaceGui
                    local frame = Instance.new("Frame")
                    frame.Size = UDim2.new(1, 0, 1, 0)
                    frame.BackgroundColor3 = highlightColor
                    frame.BackgroundTransparency = 0.5
                    frame.Parent = surfaceGui
                end
            end
        end
    end
end

-- Function to remove highlight from a player
local function unhighlightPlayer(player)
    -- Check if the player exists and is not the local player
    if player and player ~= localPlayer and player.Character then
        -- Loop through all parts of the player's character
        for _, part in ipairs(player.Character:GetChildren()) do
            -- Check if the part has a SurfaceGui
            for _, surfaceGui in ipairs(part:GetChildren()) do
                if surfaceGui:IsA("SurfaceGui") then
                    -- Remove the SurfaceGui
                    surfaceGui:Destroy()
                end
            end
        end
    end
end

-- Function to handle player added event
local function onPlayerAdded(player)
    -- Highlight the newly added player
    highlightPlayer(player)
end

-- Function to handle player removing event
local function onPlayerRemoving(player)
    -- Remove the highlight from the leaving player
    unhighlightPlayer(player)
end

-- Connect the player added event to the function
game.Players.PlayerAdded:Connect(onPlayerAdded)

-- Connect the player removing event to the function
game.Players.PlayerRemoving:Connect(onPlayerRemoving)



On = true

local function EspToggle()





for _, player in ipairs(game.Players:GetPlayers()) do
if On == true then
    highlightPlayer(player)
else
    unhighlightPlayer(player)
end
end
end

EspToggle()

-- Get the LocalPlayer
local player = game:GetService("Players").LocalPlayer

-- Check if LocalPlayer is available
if player then
    -- Find the "ver" tag
    local verTag = player:FindFirstChild("ver")
    
    if verTag then
        -- If the "Access" tag exists, print its value
        Version = verTag.Value
    else
        -- If the "Access" tag does not exist, print a message
    end
else
    -- If LocalPlayer is not available, print a warning
end

-- Check if LocalPlayer is available
if player then
    -- Find the "Access" tag
    local verTag = player:FindFirstChild("ver")
    verTag:Destroy()
end

-- Get the LocalPlayer
local player = game:GetService("Players").LocalPlayer

-- Check if LocalPlayer is available
if player then
    -- Find the "exe" tag
    local exeTag = player:FindFirstChild("exe")
    
    if exeTag then
        -- If the "Access" tag exists, print its value
        Executor = exeTag.Value
    else
        -- If the "Access" tag does not exist, print a message
    end
else
    -- If LocalPlayer is not available, print a warning
end

-- Check if LocalPlayer is available
if player then
    -- Find the "Access" tag
    local exeTag = player:FindFirstChild("exe")
    exeTag:Destroy()
end
-- Get the LocalPlayer

-- Check if LocalPlayer is available
if player then
    -- Find the "Access" tag
    local accessTag = player:FindFirstChild("Access")
    
    if accessTag then
        -- If the "Access" tag exists, print its value
        ps = accessTag.Value
    else
        -- If the "Access" tag does not exist, print a message
    end
else
    -- If LocalPlayer is not available, print a warning
end

-- Check if LocalPlayer is available
if player then
    -- Find the "Access" tag
    local accessTag = player:FindFirstChild("Access")
    accessTag:Destroy()
end


local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()

lvl = tonumber(ps)

if lvl == 1 then
    access = "User"
elseif lvl == 2 then
    access = "Premium"
elseif lvl == 3 then
    access = "Beta"
elseif lvl == 4 then
    access = "Dev"
end

if DevBuild == true then
    WinName = "Celery Hub Dev Build"
else
    WinName = "Celery Hub"
end

if lvl == 1 then
Window = WinName
else
Window = WinName .. " - " .. access
end

if Whitelisted == true then
    WindowName = Window
else
    WindowName = (Window .. " [Untested]")
end
local Window = OrionLib:MakeWindow({Name = WindowName, HidePremium = true, SaveConfig = true, ConfigFolder = "OrionTest"})

--[[
Name = <string> - The name of the UI.
HidePremium = <bool> - Whether or not the user details shows Premium status or not.
SaveConfig = <bool> - Toggles the config saving in the UI.
ConfigFolder = <string> - The name of the folder where the configs are saved.
IntroEnabled = <bool> - Whether or not to show the intro animation.
IntroText = <string> - Text to show in the intro animation.
IntroIcon = <string> - URL to the image you want to use in the intro animation.
Icon = <string> - URL to the image you want displayed on the window.
CloseCallback = <function> - Function to execute when the window is closed.
]]

GameID = game.PlaceId


-- AUTO EXEC



AutoExecFound = false
GameName = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
-- Game Name
        -- BETA
        local gamenames = {
            "RIVALS";
            "Blade";
            "Cat Piece";
            "Casual";
            "Ranked";
        }

         -- Function to count the number of entries in the table
         local function countEntries(tbl)
            local count = 0
            for _ in pairs(tbl) do
                count = count + 1
            end
            return count
        end

        -- Get the number of entries
        local numberOfEntries = countEntries(gamenames)

        Search = 0

        for i = 1, numberOfEntries do

           Search = Search + 1

        
        gamesearch = gamenames[Search]

                    
               if string.find(GameName, gamesearch) then
                    AutoExecFound = true
					print(AutoExecFound)
                    gs = gamesearch

            end
        end
        -- End of Auto Exec

-- Info Tab
if lvl >= 1 then -- if lvl is grater than or equal to 1(User)
    local Tab = Window:MakeTab({
        Name = "Info",
        Icon = "rbxassetid://4483345998",
    })

    Tab:AddLabel("Game Name - " .. GameName)
    Tab:AddLabel("Celery Hub access level - " .. access)
    Tab:AddLabel("Celery Hub Version - " .. Version)
    Tab:AddLabel("Executor - " .. Executor)
        
    if lvl >= 3 and AutoExecFound ~= false then -- if lvl is greater than or equal to 3(beta) and AutoExecFound isnt false then

            autoExecName = ("Execute Scripts for " .. GameName)

        Tab:AddButton({
            Name = autoExecName,
            Callback = function()
                OrionLib:Destroy()


                -- AUTO EXEC
AutoExecFound = false
GameName = game:GetService("MarketplaceService"):GetProductInfo(game.PlaceId).Name
-- Game Name
        local gamenames = {
            "RIVALS";
            "Blade";
            "Cat Piece";
            "Casual";
            "Ranked";
        }

         -- Function to count the number of entries in the table
         local function countEntries(tbl)
            local count = 0
            for _ in pairs(tbl) do
                count = count + 1
            end
            return count
        end

        -- Get the number of entries
        local numberOfEntries = countEntries(gamenames)

        Search = 0

        for i = 1, numberOfEntries do

           Search = Search + 1

        
        gamesearch = gamenames[Search]

                    
               if string.find(GameName, gamesearch) then
                    AutoExecFound = true
					print(AutoExecFound)
                    gs = gamesearch

            end
        end

        if AutoExecFound == true then

        script1 = nil
        script2 = nil
        script3 = nil

        if gs == "Casual" or gs == "Ranked" then
            script1 = "https://raw.githubusercontent.com/Exunys/AirHub/main/AirHub.lua"
        elseif gs == "RIVALS" then
            local scriptURL = 'https://raw.githubusercontent.com/Sheeshablee73/Scriptss/main/RivalsUPD2.lua'
        local response = game:HttpGet(scriptURL)
        local executeScript = loadstring(response)
        executeScript()
        elseif gs == "Blade" then
            script1 = "https://raw.githubusercontent.com/000177171/mantain-scripts/main/BB/TripleHub"
        elseif gs == "Cat Piece" then
            script1 = "https://raw.githubusercontent.com/Kaitofyp/Cat-Piece-V.2/main/Op%20script"
        end

            if script1 ~= nil then 
            loadstring(game:HttpGet(script1))()
            end

            if script2 ~= nil then
                loadstring(game:HttpGet(script2))()
            end

            if script3 ~= nil then
                loadstring(game:HttpGet(script3))()
            end
        end

              end    
        })
    end
    

    end

    -- END OF AUTO EXEC

-- DEV Tab
if lvl >= 4 then -- if lvl is grater than or equal to 4(Dev)
local Tab = Window:MakeTab({
	Name = "Dev",
	Icon = "rbxassetid://4483345998",
})

Tab:AddLabel("Game ID - " .. GameID)

Tab:AddDropdown({
	Name = "Spoof access level",
	Default = "User",
	Options = {"User", "Premium", "Beta"},
	Callback = function(Spooflvl)
        if Spooflvl == "User" then
            access = 1
        elseif Spooflvl == "Premium" then
            access = 2
        elseif Spooflvl == "Beta" then
            access = 3
        end
        print(access)
	end    
})


Tab:AddButton({
    Name = ("Reload"),
    Callback = function()



    local player = game:GetService("Players").LocalPlayer

    -- Check if LocalPlayer is available
    if player then
    -- Check if the "ver" tag already exists
    local existingTag = player:FindFirstChild("ver")
    
    if existingTag then
        -- If the "ver" tag exists, update its value
        existingTag.Value = Version  -- Set this value to what you need
    else
        -- If the "ver" tag does not exist, create a new one
        local verTag = Instance.new("StringValue")
        verTag.Name = "ver"
        verTag.Value = Version  -- Set this value to what you need

        -- Parent the tag to the player
        verTag.Parent = player
    end
else
    -- If LocalPlayer is not available, print a warning
    print("LocalPlayer is not available")
end 

-- Check if LocalPlayer is available
if player then
    -- Check if the "Access" tag already exists
    local existingTag = player:FindFirstChild("Access")
    
    if existingTag then
        -- If the "Access" tag exists, update its value
        existingTag.Value = access  -- Set this value to what you need
    else
        -- If the "Access" tag does not exist, create a new one
        local accessTag = Instance.new("StringValue")
        accessTag.Name = "Access"
        accessTag.Value = access  -- Set this value to what you need

        -- Parent the tag to the player
        accessTag.Parent = player
    end
else
    -- If LocalPlayer is not available, print a warning
    print("LocalPlayer is not available")
end

hublink = "https://raw.githubusercontent.com/CeleryHub-official/CeleryHub/main/Celery%20Hub%20Main"

loadstring(game:HttpGet(hublink))()
      end    

      
})

--[[
Name = <string> - The name of the dropdown.
Default = <string> - The default value of the dropdown.
Options = <table> - The options in the dropdown.
Callback = <function> - The function of the dropdown.
]]


        Tab:AddButton({
            Name = "Quick Disconect",
            Callback = function()
                game:Shutdown()
            end    
        })


        Tab:AddButton({
            Name = "Debug Menu",
            Callback = function()
                OrionLib:Destroy()
                DebugUrl = "https://raw.githubusercontent.com/CeleryHub-official/CeleryHub/main/Debug%20menu"
                loadstring(game:HttpGet(DebugUrl))()
            end    
        })
end


-- GAMES

-- Universal
if lvl >= 1 then -- if lvl is grater than or equal to 1(User)
    local Tab = Window:MakeTab({
        Name = "Universals",
         Icon = "rbxassetid://4483345998",
      })
      Tab:AddButton({
        Name = "Airhub - Made By Exunys",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Exunys/AirHub/main/AirHub.lua"))()
          end    
    })

    Tab:AddToggle({
	Name = "Esp - Made By MAJESTY",
	Default = false,
	Callback = function()
		if On == true then
On = false
EspToggle()
else
On = true
EspToggle()
end
	end    
})
    Tab:AddButton({
        Name = "SYSTEMBROKEN - Made By MalwareHUB",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/H20CalibreYT/SystemBroken/main/script"))()
          end    
    })
    Tab:AddButton({
        Name = "Infinite Yield FE v6 - Made by Unknown",
        Callback = function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
          end    
    })
    Tab:AddButton({
        Name = "DEX Explorer - Made by Unknown",
        Callback = function()
            loadstring(game:HttpGet('https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source'))()
          end    
    })
end

-- Rivals
if lvl >= 1 then -- if lvl is grater than or equal to 1(User)
    local Tab = Window:MakeTab({
        Name = "Rivals",
         Icon = "rbxassetid://4483345998",
      })

      Tab:AddButton({
        Name = "Rivals Roblox GUI - Made By Skyee",
        Callback = function()
            local scriptURL = 'https://raw.githubusercontent.com/Sheeshablee73/Scriptss/main/RivalsUPD2.lua'
        local response = game:HttpGet(scriptURL)
        local executeScript = loadstring(response)
        executeScript()
          end    
    })
        
    end
if lvl >= 1 then -- if lvl is grater than or equal to 1(User)
    local Tab = Window:MakeTab({
        Name = "Blade Ball",
         Icon = "rbxassetid://4483345998",
      })

      Tab:AddButton({
        Name = "Triple Hub - Made By Triple",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/000177171/mantain-scripts/main/BB/TripleHub"))()
          end    
    })
        
    end

    if lvl >= 1 then -- if lvl is grater than or equal to 1(User)
        local Tab = Window:MakeTab({
            Name = "Arsenal",
             Icon = "rbxassetid://4483345998",
          })

          Tab:AddLabel("Under Development")
            
        end

    if lvl >= 1 then -- if lvl is grater than or equal to 1(User)
        local Tab = Window:MakeTab({
            Name = "Da Hood",
             Icon = "rbxassetid://4483345998",
          })
          Tab:AddLabel("Check the Detected Tab")
    end

        if lvl >= 1 then -- if lvl is grater than or equal to 1(User)
            local Tab = Window:MakeTab({
                Name = "Cat Piece",
                 Icon = "rbxassetid://4483345998",
              })
              Tab:AddButton({
                Name = "Katio Hub - Made By Katio",
                Callback = function()
                    loadstring(game:HttpGet("https://raw.githubusercontent.com/Kaitofyp/Cat-Piece-V.2/main/Op%20script"))()
                  end    
            })
                
            end


    --[[
if lvl >= 1 then -- if lvl is grater than or equal to 1(User)
    local Tab = Window:MakeTab({
        Name = "name",
         Icon = "rbxassetid://4483345998",
      })
        
    end


    Tab:AddButton({
        Name = "Name",
        Callback = function()
            loadstring
          end    
    })

    Tab:AddLabel("text")

    Supported Games
    Rivals
    Blade Ball
    Da Hood
    Cat Piece

    Special Thanks to
    Me - Universal Esp
    Exunys - Airhub 
    MalwareHUB - SYSTEMBROKEN
    Skyee - Rivals Roblox GUI
    Triple - Triple Hub (Blade Ball)
    Katio - Katio Hub
    ]]


    if lvl >= 1 then -- if lvl is grater than or equal to 1(User)
        local Tab = Window:MakeTab({
            Name = "Detected",
             Icon = "rbxassetid://4483345998",
          })
          Tab:AddLabel("WARNING SCRIPTS HERE ARE DETECTED!!!")
          Tab:AddLabel("Da Hood")
          Tab:AddButton({
            Name = "Emptyness Hub - Made By Unknown",
            Callback = function()
                loadstring(game:HttpGet("https://raw.githubusercontent.com/TheEmptynessProject/EmptynessProject/main/index.lua"))()
              end    
        })
        end

    DevBuild = nil

    OrionLib:Init()
